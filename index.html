<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ch√∫c M·ª´ng Sinh Nh·∫≠t!</title>
    <link href="https://fonts.googleapis.com/css2?family=Kalam:wght@300;400;700&family=Dancing+Script:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Kalam', cursive;
            overflow: hidden;
            height: 100vh;
            position: relative;
        }

        /* Phase 1: Wishes */
        .wishes-container {
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%);
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            position: relative;
        }

        .wish-text {
            font-size: 2rem;
            color: #d63384;
            margin: 20px;
            opacity: 0;
            transform: translateY(50px);
            text-shadow: 
                2px 2px 0px #fff,
                -2px -2px 0px #fff,
                2px -2px 0px #fff,
                -2px 2px 0px #fff;
            position: relative;
            display: none;
            max-width: 90%;
            text-align: center;
            line-height: 1.4;
        }

        .wish-text::after {
            content: '';
            position: absolute;
            top: -5px;
            left: -5px;
            right: -5px;
            bottom: -5px;
            border: 3px dashed #d63384;
            border-radius: 15px;
            opacity: 0.7;
        }

        .wish-text.show {
            opacity: 1;
            transform: translateY(0);
            display: block;
            animation: fadeInUp 1s ease forwards;
        }

        .next-button {
            background: linear-gradient(45deg, #ff6b9d, #ffc3d8);
            border: 3px dashed #d63384;
            border-radius: 25px;
            padding: 15px 30px;
            font-size: 1.2rem;
            color: #d63384;
            cursor: pointer;
            margin-top: 30px;
            font-family: 'Kalam', cursive;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(214, 51, 132, 0.3);
        }

        .next-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(214, 51, 132, 0.4);
        }

        .cake-button {
            background: linear-gradient(45deg, #ffb3d9, #ff6b9d);
            border: 3px dashed #d63384;
            border-radius: 25px;
            padding: 20px 40px;
            font-size: 1.5rem;
            color: #fff;
            cursor: pointer;
            margin-top: 30px;
            font-family: 'Dancing Script', cursive;
            font-weight: 700;
            transition: all 0.3s ease;
            box-shadow: 0 6px 20px rgba(214, 51, 132, 0.4);
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .cake-button:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 25px rgba(214, 51, 132, 0.5);
        }

        /* Phase 2: Cake */
        .cake-container {
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%);
            height: 100vh;
            display: none;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        .cake {
            width: 300px;
            height: 300px;
            cursor: pointer;
            transition: all 0.3s ease;
            filter: drop-shadow(0 10px 20px rgba(0,0,0,0.3));
        }

        .cake:hover {
            transform: scale(1.1);
        }

        /* Water Stream Transition */
        .water-stream {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(180deg, 
                rgba(255, 182, 193, 0.9) 0%, 
                rgba(255, 192, 203, 0.8) 25%,
                rgba(255, 105, 180, 0.7) 50%,
                rgba(219, 112, 147, 0.6) 75%,
                rgba(199, 21, 133, 0.5) 100%);
            z-index: 1000;
            opacity: 0;
            pointer-events: none;
        }

        /* Explosion Effects */
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            z-index: 999;
        }

        .ribbon {
            position: absolute;
            width: 20px;
            height: 3px;
            z-index: 999;
        }

        /* Phase 3: Photo Rain */
        .photo-rain-container {
            background: #000;
            height: 100vh;
            display: none;
            justify-content: center;
            align-items: center;
            position: relative;
            perspective: 1000px;
        }

        .photo-frame {
            width: 250px;
            height: 250px;
            border: 20px solid #8B4513;
            border-radius: 15px;
            position: relative;
            transform-style: preserve-3d;
            animation: rotate3D 10s linear infinite;
            box-shadow: 
                0 0 30px rgba(255, 215, 0, 0.8),
                inset 0 0 20px rgba(139, 69, 19, 0.5);
        }

        .photo-frame::before {
            content: '';
            position: absolute;
            top: -10px;
            left: -10px;
            right: -10px;
            bottom: -10px;
            border: 3px solid #DAA520;
            border-radius: 20px;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.6);
        }

        .photo {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 5px;
            backface-visibility: hidden;
        }

        .text-rain {
            position: absolute;
            color: white;
            font-size: 1.2rem;
            font-weight: 600;
            z-index: 100;
            text-shadow: 0 0 10px currentColor;
            pointer-events: none;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes rotate3D {
            0% { transform: rotateY(0deg); }
            100% { transform: rotateY(360deg); }
        }

        @keyframes fall {
            to {
                transform: translateY(100vh) rotate(360deg);
            }
        }

        @keyframes explode {
            0% {
                transform: scale(0) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: scale(1) rotate(720deg);
                opacity: 0;
            }
        }

        /* Mobile Touch Controls */
        @media (max-width: 768px) {
            .wish-text {
                font-size: 1.5rem;
                margin: 15px;
                max-width: 95%;
            }
            
            .photo-frame {
                width: 200px;
                height: 200px;
            }
        }

        /* Hidden elements */
        .hidden {
            display: none !important;
        }

        .show-flex {
            display: flex !important;
        }
    </style>
</head>
<body>
    <!-- Phase 1: Wishes -->
    <div class="wishes-container" id="wishesContainer">
        <div class="wish-text" id="wish1">Ch√∫c m·ª´ng sinh nh·∫≠t c·∫≠u, ng∆∞·ªùi ƒë·∫∑c bi·ªát nh·∫•t üéâ</div>
        <div class="wish-text" id="wish2">G·ª≠i c·∫≠u, ng∆∞·ªùi ƒë·∫∑c bi·ªát nh·∫•t trong ng√†y h√¥m nay..</div>
        <div class="wish-text" id="wish3">c·∫£ th·∫ø gi·ªõi d∆∞·ªùng nh∆∞ ch·∫≠m ƒëi 1 nh·ªãp c√≥ l·∫Ω ch·ªâ v√¨ c·∫≠u.</div>
        <div class="wish-text" id="wish4">C·∫≠u l√† ng∆∞·ªùi kh√°ch h√†ng ƒë·∫ßu ti√™n m√† t·ªõ ƒë√£ d√†nh to√†n b·ªô m·ªçi s·ª©c m·∫°nh n·ªôi t√¢m ƒë·ªÉ l·∫≠p tr√¨nh ra web n√†y</div>
        <div class="wish-text" id="wish5">v·∫≠y n√™n c√≥ l·∫Ω v·∫´n c√≤n non n·ªõt, t·ªõ v·∫´n mong c·∫≠u c√≥ m·ªôt tr·∫£i nghi·ªám t·ªët c√πng n√≥.</div>
        <div class="wish-text" id="wish6">Ch√∫c c·∫≠u s·∫Ω th·∫≠t vui v·∫ª kho√°c l√™n m√¨nh m·ªôt phong th√°i r·ª±c r·ª° nh·∫•t..</div>
        <div class="wish-text" id="wish7">v√¨ c·∫≠u l√† ng∆∞·ªùi tuy·ªát nh·∫•t ng√†y h√¥m nay.</div>
        <div class="wish-text" id="wish8">dungyut ‚ú®</div>
        <div class="wish-text" id="wish9">Hy v·ªçng tu·ªïi m·ªõi s·∫Ω mang l·∫°i cho c·∫≠u th·∫≠t nhi·ªÅu ni·ªÅm vui v√† b·∫•t ng·ªù!</div>
        <div class="wish-text" id="wish10">S·∫µn s√†ng ch∆∞a? Nh·∫•n v√†o b√°nh kem nha! üéÇ</div>
        <button class="next-button" id="nextBtn" style="display: none;">Ti·∫øp theo</button>
        <button class="cake-button" id="cakeBtn" style="display: none;">üéÇ B√ÅNH KEM üéÇ</button>
    </div>

    <!-- Water Stream Transition -->
    <div class="water-stream" id="waterStream"></div>

    <!-- Phase 2: Cake -->
    <div class="cake-container" id="cakeContainer">
        <img src="cake.png" alt="Birthday Cake" class="cake" id="cakeImage">
    </div>

    <!-- Phase 3: Photo Rain -->
    <div class="photo-rain-container" id="photoRainContainer">
        <div class="photo-frame">
            <img src="person.png" alt="Birthday Person" class="photo">
        </div>
    </div>

    <script>
        let currentWish = 0;
        let musicPlayed = false;
        const wishes = ['wish1', 'wish2', 'wish3', 'wish4', 'wish5', 'wish6', 'wish7', 'wish8', 'wish9', 'wish10'];
        const rainTexts = ['üéâ', 'üéÇ', 'üéà', 'üéÅ', '‚≠ê', 'üíù', 'üåü', 'üí´', 'üéä', 'üéÄ',"VMTTwThor","to yeu cau","SNVV nhaa"];
        const colors = ['#ff6b9d', '#ffc3d8', '#ff9a9e', '#fecfef', '#d63384', '#ffb3d9'];

        // Touch controls for mobile 3D effect
        let mouseX = 0;
        let mouseY = 0;
        let isTouch = false;

        document.addEventListener('mousemove', (e) => {
            if (!isTouch) {
                mouseX = (e.clientX / window.innerWidth) * 2 - 1;
                mouseY = (e.clientY / window.innerHeight) * 2 - 1;
                updatePhotoFrame();
            }
        });

        document.addEventListener('touchmove', (e) => {
            isTouch = true;
            const touch = e.touches[0];
            mouseX = (touch.clientX / window.innerWidth) * 2 - 1;
            mouseY = (touch.clientY / window.innerHeight) * 2 - 1;
            updatePhotoFrame();
        });

        function updatePhotoFrame() {
            const photoFrame = document.querySelector('.photo-frame');
            if (photoFrame && document.getElementById('photoRainContainer').style.display === 'flex') {
                const rotateY = mouseX * 20; // Gi·∫£m ƒë·ªô xoay ƒë·ªÉ tr√°nh b√≥p m√©o
                const rotateX = -mouseY * 15;
                photoFrame.style.animation = 'none'; // T·∫Øt auto-rotate khi user t∆∞∆°ng t√°c
                photoFrame.style.transform = `perspective(1000px) rotateY(${rotateY}deg) rotateX(${rotateX}deg) translateZ(0)`;
            }
        }

        function showNextWish() {
            if (currentWish < wishes.length) {
                // ·∫®n t·∫•t c·∫£ c√°c wish tr∆∞·ªõc ƒë√≥
                wishes.forEach(wishId => {
                    document.getElementById(wishId).classList.remove('show');
                });
                
                // Hi·ªán wish hi·ªán t·∫°i
                document.getElementById(wishes[currentWish]).classList.add('show');
                currentWish++;
                
                // Hi·ªán n√∫t ph√π h·ª£p
                if (currentWish < wishes.length) {
                    setTimeout(() => {
                        document.getElementById('nextBtn').style.display = 'block';
                        document.getElementById('cakeBtn').style.display = 'none';
                    }, 1000);
                } else {
                    setTimeout(() => {
                        document.getElementById('nextBtn').style.display = 'none';
                        document.getElementById('cakeBtn').style.display = 'block';
                    }, 1000);
                }
            }
        }

        function playMusic() {
            if (!musicPlayed) {
                const audio = new Audio('sn.mp3');
                audio.play().catch(e => console.log('Could not play audio:', e));
                musicPlayed = true;
            }
        }

        function createWaterStream() {
            const waterStream = document.getElementById('waterStream');
            waterStream.style.opacity = '1';
            waterStream.style.transform = 'translateY(0)';
            waterStream.style.transition = 'all 1s ease-in-out';
            
            setTimeout(() => {
                waterStream.style.transform = 'translateY(100vh)';
                setTimeout(() => {
                    waterStream.style.opacity = '0';
                    showCakePhase();
                }, 1000);
            }, 500);
        }

        function showCakePhase() {
            document.getElementById('wishesContainer').style.display = 'none';
            document.getElementById('cakeContainer').style.display = 'flex';
        }

        function createExplosion() {
            const container = document.getElementById('cakeContainer');
            const cakeImg = document.getElementById('cakeImage');
            const rect = cakeImg.getBoundingClientRect();
            const centerX = rect.left + rect.width / 2;
            const centerY = rect.top + rect.height / 2;

            // ·∫®n b√°nh kem khi n·ªï
            cakeImg.style.transform = 'scale(0)';
            cakeImg.style.transition = 'transform 0.3s ease-out';

            // T·∫°o nhi·ªÅu t·∫ßng ph√°o gi·∫•y v·ªõi k√≠ch th∆∞·ªõc v√† h√¨nh d·∫°ng kh√°c nhau
            for (let wave = 0; wave < 3; wave++) {
                setTimeout(() => {
                    // Confetti nh·ªè
                    for (let i = 0; i < 80; i++) {
                        const confetti = document.createElement('div');
                        confetti.className = 'confetti';
                        confetti.style.position = 'fixed';
                        confetti.style.left = centerX + 'px';
                        confetti.style.top = centerY + 'px';
                        confetti.style.width = (Math.random() * 8 + 4) + 'px';
                        confetti.style.height = (Math.random() * 8 + 4) + 'px';
                        confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                        confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '2px';
                        confetti.style.zIndex = '1001';
                        
                        const angle = (Math.random() * 2 * Math.PI);
                        const velocity = Math.random() * 600 + 300 + (wave * 100);
                        const vx = Math.cos(angle) * velocity;
                        const vy = Math.sin(angle) * velocity - 200; // Bay l√™n tr∆∞·ªõc
                        const gravity = 800;
                        const lifetime = Math.random() * 2 + 2;
                        
                        confetti.style.animation = `confettiFall ${lifetime}s ease-out forwards`;
                        confetti.style.setProperty('--vx', vx + 'px');
                        confetti.style.setProperty('--vy', vy + 'px');
                        
                        document.body.appendChild(confetti);
                        
                        setTimeout(() => confetti.remove(), lifetime * 1000);
                    }

                    // Ruy bƒÉng d√†i
                    for (let i = 0; i < 30; i++) {
                        const ribbon = document.createElement('div');
                        ribbon.className = 'ribbon';
                        ribbon.style.position = 'fixed';
                        ribbon.style.left = centerX + 'px';
                        ribbon.style.top = centerY + 'px';
                        ribbon.style.width = (Math.random() * 40 + 20) + 'px';
                        ribbon.style.height = '4px';
                        ribbon.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                        ribbon.style.borderRadius = '2px';
                        ribbon.style.zIndex = '1000';
                        
                        const angle = Math.random() * 2 * Math.PI;
                        const velocity = Math.random() * 500 + 250 + (wave * 80);
                        const vx = Math.cos(angle) * velocity;
                        const vy = Math.sin(angle) * velocity - 150;
                        const lifetime = Math.random() * 3 + 3;
                        
                        ribbon.style.animation = `ribbonFall ${lifetime}s ease-out forwards`;
                        ribbon.style.setProperty('--vx', vx + 'px');
                        ribbon.style.setProperty('--vy', vy + 'px');
                        
                        document.body.appendChild(ribbon);
                        
                        setTimeout(() => ribbon.remove(), lifetime * 1000);
                    }

                    // B·ª•i kim tuy·∫øn
                    for (let i = 0; i < 50; i++) {
                        const sparkle = document.createElement('div');
                        sparkle.style.position = 'fixed';
                        sparkle.style.left = centerX + 'px';
                        sparkle.style.top = centerY + 'px';
                        sparkle.style.width = '2px';
                        sparkle.style.height = '2px';
                        sparkle.style.backgroundColor = '#FFD700';
                        sparkle.style.borderRadius = '50%';
                        sparkle.style.boxShadow = '0 0 6px #FFD700';
                        sparkle.style.zIndex = '1002';
                        
                        const angle = Math.random() * 2 * Math.PI;
                        const velocity = Math.random() * 400 + 200;
                        const vx = Math.cos(angle) * velocity;
                        const vy = Math.sin(angle) * velocity - 100;
                        const lifetime = Math.random() * 2 + 1.5;
                        
                        sparkle.style.animation = `sparkleFall ${lifetime}s ease-out forwards`;
                        sparkle.style.setProperty('--vx', vx + 'px');
                        sparkle.style.setProperty('--vy', vy + 'px');
                        
                        document.body.appendChild(sparkle);
                        
                        setTimeout(() => sparkle.remove(), lifetime * 1000);
                    }
                }, wave * 200);
            }

            setTimeout(() => {
                showPhotoRain();
            }, 4000); // TƒÉng th·ªùi gian ƒë·ªÉ xem ƒë·∫ßy ƒë·ªß hi·ªáu ·ª©ng
        }

        function showPhotoRain() {
            document.getElementById('cakeContainer').style.display = 'none';
            document.getElementById('photoRainContainer').style.display = 'flex';
            
            // Start text rain
            setInterval(createRainText, 200);
        }

        function createRainText() {
            const container = document.getElementById('photoRainContainer');
            const text = document.createElement('div');
            text.className = 'text-rain';
            text.textContent = rainTexts[Math.floor(Math.random() * rainTexts.length)];
            text.style.left = Math.random() * 100 + '%';
            text.style.top = '-50px';
            text.style.color = colors[Math.floor(Math.random() * colors.length)];
            text.style.fontSize = (Math.random() * 1 + 0.8) + 'rem';
            
            const duration = Math.random() * 3 + 4;
            text.style.animation = `fall ${duration}s linear forwards`;
            
            container.appendChild(text);
            
            setTimeout(() => text.remove(), duration * 1000);
        }

        // Event listeners
        document.getElementById('nextBtn').addEventListener('click', () => {
            playMusic();
            document.getElementById('nextBtn').style.display = 'none';
            setTimeout(showNextWish, 100);
        });

        document.getElementById('cakeBtn').addEventListener('click', () => {
            playMusic();
            createWaterStream();
        });

        document.getElementById('cakeImage').addEventListener('click', () => {
            createExplosion();
        });

        // Start the experience
        setTimeout(showNextWish, 500);

        // Add custom CSS for explosion animation
        const style = document.createElement('style');
        style.textContent = `
            @keyframes confettiFall {
                0% {
                    transform: scale(0) rotate(0deg);
                    opacity: 1;
                }
                10% {
                    transform: scale(1) rotate(90deg);
                    opacity: 1;
                }
                100% {
                    transform: scale(0.8) rotate(720deg) translate(var(--vx), calc(var(--vy) + 100vh));
                    opacity: 0;
                }
            }
            
            @keyframes ribbonFall {
                0% {
                    transform: scale(0) rotate(0deg);
                    opacity: 1;
                }
                15% {
                    transform: scale(1) rotate(180deg);
                    opacity: 1;
                }
                100% {
                    transform: scale(0.9) rotate(1080deg) translate(var(--vx), calc(var(--vy) + 120vh));
                    opacity: 0;
                }
            }
            
            @keyframes sparkleFall {
                0% {
                    transform: scale(0);
                    opacity: 1;
                    box-shadow: 0 0 20px #FFD700;
                }
                20% {
                    transform: scale(1.5);
                    opacity: 1;
                    box-shadow: 0 0 30px #FFD700;
                }
                100% {
                    transform: scale(0.5) translate(var(--vx), calc(var(--vy) + 80vh));
                    opacity: 0;
                    box-shadow: 0 0 5px #FFD700;
                }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>
